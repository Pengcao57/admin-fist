import{f as W,I as X,J as E,o as f,X as Y,i as S,r as x,l as T,j as z,Y as Z,Z as q,g as N,k as e,w as o,p as i,n as $,$ as U,a0 as Q,v as k,x as F,y as P,z as L,a1 as A,B as R,a2 as ee,M as I,L as O,h as te,a3 as le,a4 as oe,A as ae,u as ne,a5 as re,E as D,H as ue,a6 as se}from"./vendor-DgN6yt9k.js";import{r as de,p as ie,s as G,g as ce}from"./common-CQ4S3Plc.js";import{g as H}from"./shared/index-5/index-6-dmZkVsyT.js";const pe={};function _e(y,a){const t=X("router-view");return f(),E(t)}const me=W(pe,[["render",_e]]),B=Y(me);B.use(de);B.use(ie);B.mount("#app");function fe(y){return G.request({url:"/projects",method:"GET",data:y})}const be={class:"wrap-content"},ge=S({__name:"index",setup(y){let a=x([]),t=T({introduce:"",title:"",currentPage:1,dataCount:0,pageSize:10});z(()=>{p()});const p=()=>{fe().then(s=>{a.value=s.data,t.dataCount=s.data.length})};let c=Z(()=>a.value.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize));const r=s=>{t.currentPage=s},m=s=>{t.pageSize=s},_=()=>{let s=[];t.title||t.introduce?(t.title&&(s=a.value.filter(d=>d.title.indexOf(t.title)>-1)),t.introduce&&(s=a.value.filter(d=>d.introduce.indexOf(t.introduce)>-1))):s=a.value,a.value=s,t.currentPage=1,t.dataCount=a.value.length};return q([()=>t.title,()=>{t.introduce}],()=>{p()}),(s,d)=>{const b=F,n=P,l=L,h=$,v=A,C=U,V=Q;return f(),N("div",be,[e(h,{inline:!0,model:i(t),class:"search-form"},{default:o(()=>[e(n,{label:"项目名称"},{default:o(()=>[e(b,{modelValue:i(t).title,"onUpdate:modelValue":d[0]||(d[0]=g=>i(t).title=g),placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1}),e(n,{label:"项目详情"},{default:o(()=>[e(b,{modelValue:i(t).introduce,"onUpdate:modelValue":d[1]||(d[1]=g=>i(t).introduce=g),placeholder:"请输入项目详情"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(l,{type:"primary",onClick:d[2]||(d[2]=g=>_())},{default:o(()=>d[3]||(d[3]=[k("查询")])),_:1})]),_:1})]),_:1},8,["model"]),e(C,{data:i(c),border:"",style:{width:"100%"}},{default:o(()=>[e(v,{prop:"id",label:"编号",width:"180"}),e(v,{prop:"title",label:"名称",width:"180"}),e(v,{prop:"introduce",label:"详情"})]),_:1},8,["data"]),e(V,{background:"",layout:"prev, pager, next, sizes",total:i(t).dataCount,"page-sizes":[5,10,15,20],onSizeChange:m,onCurrentChange:r},null,8,["total"])])}}}),we=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),he={class:"dialog-footer"},ve=S({__name:"index",setup(y){const a=T({nickName:"",role:0});let t=x([]),p=x([]),c=x(!1),r=T({id:0,nickName:"",role:[]});const m=()=>{c.value=!1;let n=t.value.find(l=>l.id===r.id);n.nickName=r.nickName,n.role=[],p.value.forEach(l=>{r.role.find(h=>h===l.roleId)&&n.role.push({role:l.roleId,roleName:l.roleName})})},_=n=>{c.value=!0,Object.assign(r,{...n,role:n.role.map(l=>l.role)})},s=()=>{let n=[];a.nickName||a.role?(a.nickName&&(n=t.value.filter(l=>l.nickName.indexOf(a.nickName)!==-1)),a.role&&(n=a.nickName?n:t.value,n=n.filter(l=>l.role.find(h=>h.role===a.role)))):n=t.value,t.value=n};z(()=>{d(),b()});const d=()=>{ce().then(n=>{t.value=n.data}).catch(n=>{})},b=()=>{H().then(n=>{p.value=n.data}).catch(n=>{})};return q([()=>a.nickName,()=>a.role],()=>{(a.nickName===""||a.role===0)&&d()}),(n,l)=>{const h=F,v=P,C=le,V=oe,g=L,M=$,w=A,J=U,K=ee;return f(),N("div",null,[e(M,{inline:!0,class:"search-form",model:a},{default:o(()=>[e(v,{label:"用户名称"},{default:o(()=>[e(h,{modelValue:a.nickName,"onUpdate:modelValue":l[0]||(l[0]=u=>a.nickName=u),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"角色",prop:"role"},{default:o(()=>[e(V,{modelValue:a.role,"onUpdate:modelValue":l[1]||(l[1]=u=>a.role=u),size:"large"},{default:o(()=>[e(C,{label:"全部",value:0}),(f(!0),N(I,null,O(i(p),u=>(f(),E(C,{key:u.roleId,label:u.roleName,value:u.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(g,{type:"primary",onClick:s},{default:o(()=>l[6]||(l[6]=[k("查询")])),_:1})]),_:1})]),_:1},8,["model"]),e(J,{data:i(t),border:"",style:{width:"100%"}},{default:o(()=>[e(w,{prop:"id",label:"编号",width:"180"}),e(w,{prop:"nickName",label:"用户昵称",width:"180"}),e(w,{prop:"role",label:"用户角色",width:"180"},{default:o(u=>[(f(!0),N(I,null,O(u.row.role,j=>(f(),E(g,{key:j.role,type:"primary",size:"small"},{default:o(()=>[k(ae(j.roleName),1)]),_:2},1024))),128))]),_:1}),e(w,{prop:"role",label:"操作"},{default:o(u=>[e(g,{type:"primary",onClick:j=>_(u.row),size:"small"},{default:o(()=>l[7]||(l[7]=[k("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(K,{modelValue:i(c),"onUpdate:modelValue":l[5]||(l[5]=u=>R(c)?c.value=u:c=u),title:"编辑用户信息"},{footer:o(()=>[te("span",he,[e(g,{onClick:l[4]||(l[4]=u=>R(c)?c.value=!1:c=!1)},{default:o(()=>l[8]||(l[8]=[k("取 消")])),_:1}),e(g,{type:"primary",onClick:m},{default:o(()=>l[9]||(l[9]=[k("确 定")])),_:1})])]),default:o(()=>[e(M,{model:i(r)},{default:o(()=>[e(v,{label:"用户昵称","label-width":"120px"},{default:o(()=>[e(h,{modelValue:i(r).nickName,"onUpdate:modelValue":l[2]||(l[2]=u=>i(r).nickName=u),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(v,{label:"用户角色","label-width":"120px"},{default:o(()=>[e(V,{modelValue:i(r).role,"onUpdate:modelValue":l[3]||(l[3]=u=>i(r).role=u),multiple:"",placeholder:"请选择角色",size:"large"},{default:o(()=>[(f(!0),N(I,null,O(i(p),u=>(f(),E(C,{key:u.roleId,label:u.roleName,value:u.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),ke=S({__name:"index",setup(y){const a=ne();let t=x([]);z(()=>{H().then(r=>{t.value=r.data}).catch(r=>{})});const p=()=>{re.prompt("请输入角色名称","添加角色",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:r,action:m})=>{r&&(t.value.push({roleId:t.value.length+1,roleName:r,authority:[]}),D({type:"success",message:`${r} 添加成功`}))}).catch(r=>{D({type:"info",message:"点击了取消按钮"})})},c=r=>{a.push({path:"auth",query:{id:r.roleId,auth:r.authority}})};return(r,m)=>{const _=L,s=P,d=$,b=A,n=U;return f(),N("div",null,[e(d,{"label-width":"100px"},{default:o(()=>[e(s,null,{default:o(()=>[e(_,{type:"primary",onClick:p},{default:o(()=>m[0]||(m[0]=[k("新增角色")])),_:1})]),_:1})]),_:1}),e(n,{data:i(t),border:"",style:{width:"100%"}},{default:o(()=>[e(b,{prop:"roleId",label:"角色id",width:"180px"}),e(b,{prop:"roleName",label:"角色名称",width:"180px"}),e(b,{label:"操作",width:"180px"},{default:o(l=>[e(_,{type:"primary",size:"small",onClick:h=>c(l.row)},{default:o(()=>m[1]||(m[1]=[k("修改权限")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),Se=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));function ye(y){return G.request({url:"/getAuthList",method:"GET",data:y})}const xe=S({__name:"index",setup(y){const a=ue(),t=x(null),p=x([]),{query:c}=a;c.auth&&(p.value=c.auth);let r=x([]);z(()=>{ye().then(_=>{r.value=_.data}).catch(_=>{})});const m=()=>{console.log(t.value);const _=t.value.getCheckedNodes();console.log(_),console.log(t.value.getCheckedKeys())};return(_,s)=>{const d=se,b=L;return f(),N("div",null,[e(d,{ref_key:"treeRef",ref:t,data:i(r),"check-strictly":!0,"show-checkbox":"","default-checked-keys":p.value,"node-key":"roleId",props:{label:"name",children:"roleList"}},null,8,["data","default-checked-keys"]),e(b,{type:"primary",onClick:m},{default:o(()=>s[0]||(s[0]=[k("修改权限")])),_:1})])}}}),ze=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{Ee as a,Se as b,ze as c,we as i};
